<!DOCTYPE html>
<html>

    
    <head>
        <title>EthIO Flash First</title>
        <link rel="icon" type="image/jpg" href="/favicon.jpg">
    </head>

<body>
    <h1 style="font-family: Arial, Helvetica;">Eth-IO Controller FW update</h1>

    <div id="main" style="display: none; font-family: Arial, Helvetica;">
        <ol>
        <li>Use Chrome or Edge</li>
        <li>Plug your board into your computer</li>
        <li>Short the connection of the E-Stop connector</li>
        <li>Click the Connect button</li>
        <li>Select device on CP2102N USB to UART Controller. (This step requires drivers, presumably you already have them. <a href="https://www.silabs.com/developers/usb-to-uart-bridge-vcp-drivers">Download</a>)</li>
        <li>Select Install...</li>
        <li>In the Erase prompt just click Next</li>
        <li>In the next prompt click Install</li>
        <li>It should now start flashing, wait a couple minutes to finish</li>
        <li>Boot the board in Restore Mode to complete the flashing process</li>
        </ol>
        
        
        <br><br>
        To enter Restore Mode power the device while pressing the User Button for more than 9 seconds, you will see both LEDs turn steady on, then release the button. To continue the restore process, press the button once, then, LED 2 will blink 4 times before applying the factory configuration, to stop this or exit this mode simply unplug the device. After the restore is done the device will restart.
        
        <br><br><br>
        <script
            type="module"
            src="https://unpkg.com/esp-web-tools@7.3.1/dist/web/install-button.js?module">
        </script>
        <esp-web-install-button id="installButton" manifest="webflash/manifest.json"></esp-web-install-button>
        <br><br>
        <span>NOTE: Make sure to close anything using your devices com port (e.g. Serial monitor)</span>
    </div>
    
    <div id="notSupported" style="display: none; font-family: Arial, Helvetica;">
        Your browser does not support the Web Serial API. Try Chrome
    </div>
    

    <script>
        if(navigator.serial){
            document.getElementById("notSupported").style.display = 'none';
            document.getElementById("main").style.display = 'block';
        } else {
            document.getElementById("notSupported").style.display = 'block';
            document.getElementById("main").style.display = 'none';
        }
    </script>
    
    <a href="https://esphome.github.io/esp-web-tools/">ESP Web tools</a>

</body>

</html>
